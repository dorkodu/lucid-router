let t,n,e=[],o=[];function i(i){switch(t){case"hash":if(i)return void(window.location.hash=i.substring(1));i="/"+window.location.hash.substring(1);break;case"history":i?window.history.replaceState(null,"",i):(i=window.location.pathname).length>1&&i.lastIndexOf("/")===i.length-1&&(i=i.substring(0,i.length-1));break;default:return}for(let n=0;n<o.length;++n){const e=i.match(o[n].from);if(e){const r=i;o[n].cb&&o[n].cb(...e.slice(1));if(r!==i)return;if("hash"===t)return void(window.location.hash=o[n].to);i=o[n].to,window.history.replaceState(null,"",i)}}for(let t=0;t<e.length;++t){const n=i.match(e[t].pattern);if(n)return void(e[t].cb&&e[t].cb(...n.slice(1)))}n&&n()}const r={run:function(n,e){t=n,e&&e(),"hash"===n&&window.addEventListener("hashchange",(()=>{i()})),i()},to:i,route:function(t,n){e.push({pattern:new RegExp("^"+t+"$","i"),cb:n})},redirect:function(t,n,e){o.push({from:new RegExp("^"+t+"$","i"),to:n,cb:e})},fallback:function(t){n=t}};export{r as superpage};
